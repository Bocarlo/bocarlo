---
import "../styles/global.css";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
---

<!doctype html>
<html lang="pl" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>Dom Weselny Bocarlo</title>
    <meta
      name="description"
      content="Dom Weselny Bocarlo - Twoje wymarzone miejsce na wesele"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body style="font-family: 'Inter', 'Montserrat', sans-serif;">
    <div class="min-h-screen bg-gradient-to-b from-[#f9f7f4] to-[#f5f4f2]">
      <div
        id="navbar-wrapper"
        class="fixed top-0 left-0 w-full z-50 transition-transform duration-300 will-change-transform"
      >
        <Navbar
          class="bg-white/55 backdrop-blur-xl backdrop-saturate-150 shadow-2xl border-b border-gray-200/30 transition-colors duration-300"
        />
      </div>
      <main class="container mx-auto min-h-[60vh] pt-16">
        <slot />
      </main>
      <Footer />
    </div>
    <script>
      // Glass effect sticky navbar + hide on scroll down, show on scroll up
      let lastScrollY = window.scrollY;
      let ticking = false;
      const navbar = document.getElementById("navbar-wrapper");
      let blockHide = false;
      function onScroll() {
        if (!navbar) return;
        if (blockHide) {
          navbar.style.transform = "translateY(0)";
          return;
        }
        if (!ticking) {
          window.requestAnimationFrame(() => {
            const currentScroll = window.scrollY;
            if (currentScroll <= 0) {
              navbar.style.transform = "translateY(0)";
            } else if (currentScroll > lastScrollY && currentScroll > 80) {
              navbar.style.transform = "translateY(-110%)";
            } else {
              navbar.style.transform = "translateY(0)";
            }
            lastScrollY = currentScroll;
            ticking = false;
          });
          ticking = true;
        }
      }
      window.addEventListener("scroll", onScroll, { passive: true });
      // Pokazuj navbar po kliknięciu w link w navbarze i blokuj chowanie na krótko
      document.addEventListener("DOMContentLoaded", () => {
        const navbarLinks = document.querySelectorAll(
          "#navbar-wrapper a[href^='#']"
        );
        navbarLinks.forEach((link) => {
          link.addEventListener("click", () => {
            if (navbar) {
              navbar.style.transform = "translateY(0)";
              blockHide = true;
              setTimeout(() => {
                blockHide = false;
              }, 600);
            }
          });
        });
      });
    </script>
  </body>
</html>
